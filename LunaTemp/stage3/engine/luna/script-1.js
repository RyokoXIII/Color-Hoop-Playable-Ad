!function(){if(!TRACE)return;const e=new Set(["getDefaultValue","prototype","constructor","isAssignableFrom"]);const t=new class{constructor(){this.currentTraceToken=new URLSearchParams(window.location.search).get("trace"),this.isFirstRun=!1,this.unusedClasses=new Set,this.knownClasses=new Set,this.unusedStaticMethods={},this.unusedInstanceMethods={},this.saveTimerId=null,this.version=0;const e=JSON.parse(localStorage.getItem(this.currentTraceToken));if(e){this.unusedClasses=new Set(e.unusedClasses),this.knownClasses=new Set(e.knownClasses);for(const[t,s]of Object.entries(e.unusedInstanceMethods))this.unusedInstanceMethods[t]=new Set(s);for(const[t,s]of Object.entries(e.unusedStaticMethods))this.unusedStaticMethods[t]=new Set(s)}else localStorage.clear(),this.isFirstRun=!0,this.save()}registerUnusedClass(e,t){if(!this.isFirstRun)return;if(!e)return;e=e.replace("+",".");this.knownClasses.has(e)||(this.knownClasses.add(e),this.unusedClasses.add(e),this.save())}markClassAsUsed(e,t){e&&(e=e.replace("+","."),this.unusedClasses.has(e)&&(this.unusedClasses.delete(e),this.save()))}registerUnusedStaticMethod(e,t){this.isFirstRun&&e&&(e=e.replace("+","."),"$initMembers"===t&&(t="init"),this.unusedStaticMethods[e]&&this.unusedStaticMethods[e].has(t)||(this.unusedStaticMethods[e]||(this.unusedStaticMethods[e]=new Set),this.unusedStaticMethods[e].add(t),this.save()))}markStaticMethodAsUsed(e,t){e&&(e=e.replace("+","."),"$initMembers"===t&&(t="init"),(t.startsWith("get")||t.startsWith("set"))&&this.markStaticMethodAsUsed(e,t.substring(3)),this.unusedStaticMethods[e]&&this.unusedStaticMethods[e].has(t)&&(this.unusedStaticMethods[e].delete(t),this.save()))}registerUnusedInstanceMethod(e,t){this.isFirstRun&&e&&(e=e.replace("+","."),"$initMembers"!==t?this.unusedInstanceMethods[e]&&this.unusedInstanceMethods[e].has(t)||(this.unusedInstanceMethods[e]||(this.unusedInstanceMethods[e]=new Set),this.unusedInstanceMethods[e].add(t),this.save()):this.registerUnusedStaticMethod(e,"init"))}markInstanceMethodAsUsed(e,t){e&&(e=e.replace("+","."),"$initMembers"!==t?((t.startsWith("get")||t.startsWith("set"))&&this.markInstanceMethodAsUsed(e,t.substring(3)),this.unusedInstanceMethods[e]&&this.unusedInstanceMethods[e].has(t)&&(this.unusedInstanceMethods[e].delete(t),this.unusedInstanceMethods[e].delete("get"+t),this.unusedInstanceMethods[e].delete("set"+t),this.save())):this.markStaticMethodAsUsed(e,"init"))}get(){return JSON.parse(localStorage.getItem(this.currentTraceToken))}serialize(){const e=[],t=new Set([...Object.keys(this.unusedStaticMethods),...Object.keys(this.unusedInstanceMethods)]);for(const s of t){if(this.unusedClasses.has(s)||s.endsWith("[]")||s.startsWith("Bridge."))continue;const t=this.unusedStaticMethods[s]||new Set,n=this.unusedInstanceMethods[s]||new Set;if(0===t.size&&0===n.size)continue;const i=[...t].map((e=>({name:e,excluded:!0}))),o=[...n].map((e=>({name:e,excluded:!0})));e.push({className:s.replace("+","."),staticMethods:i,instanceMethods:o})}const s=[...this.unusedClasses].filter((e=>!e.endsWith("[]")&&!e.startsWith("Bridge."))).map((e=>({name:e,excluded:!0})));return JSON.stringify({unusedClasses:s,unusedMethods:e})}save(){this.version++,this.saveTimerId&&clearTimeout(this.saveTimerId),this.saveTimerId=setTimeout((()=>{const e={},t={};for(const t in this.unusedStaticMethods)e[t]=[...this.unusedStaticMethods[t]];for(const e in this.unusedInstanceMethods)t[e]=[...this.unusedInstanceMethods[e]];localStorage.setItem(this.currentTraceToken,JSON.stringify({unusedClasses:[...this.unusedClasses],knownClasses:[...this.knownClasses],unusedStaticMethods:e,unusedInstanceMethods:t}))}),100)}};window.traceResults=t;let s=null,n=null,i=null;function o(e,t,s=new Set){const n=t.$aliases||(t.$$constructor?t.$$constructor.$aliases:t.constructor.$aliases);if(!n)return s;const i=n.filter((({alias:t})=>t===e)).map((e=>e.fn||e.descriptor.name)).filter((e=>e)).filter((e=>!s.has(e)));return i.forEach((e=>s.add(e))),i.forEach((e=>o(e,t,s))),s}function r(e,t,s){let n=Object.getPrototypeOf(e);for(;n&&d(n);)s(n.$$fullname||n.$$name,t),n=Object.getPrototypeOf(n)}function a(s,n,i,a){const u=Object.getOwnPropertyDescriptors(s);for(const c in u){if("symbol"==typeof c)continue;if(c.startsWith("$")&&!c.startsWith("$ctor")&&"$initMembers"!==c||e.has(c))continue;const l=u[c];if(!l.configurable)continue;if("value"in l&&("function"!=typeof l.value||d(l.value)))continue;if(t.knownClasses.has(n+"."+c))continue;const h="$_tr_"+c;u[h]||(Object.defineProperty(s,h,l),i(n,c),delete s[c],Object.defineProperty(s,c,{get(){a(n,c),r(s,c,a);for(const e of o(c,this))a(n,e),r(s,e,a);return this[h]},set(e){a(n,c),r(s,c,a);for(const e of o(c,this))a(n,e),r(s,e,a);this[h]=e},configurable:l.configurable,enumerable:l.enumerable}))}}function u(e,s){t.registerUnusedClass(s,e),a(e,s,t.registerUnusedStaticMethod.bind(t),t.markStaticMethodAsUsed.bind(t)),a(e.prototype,s,t.registerUnusedInstanceMethod.bind(t),t.markInstanceMethodAsUsed.bind(t))}function c(e,n){return u(e,n),new Proxy(e,{get(n,i,o){if("$$isProxy"===i)return!0;if("$$target"===i)return e;if("symbol"==typeof i||"prototype"===i)return e[i];const r=e[i];if(!r)return r;let a=r.$$fullname||r.$$name;return a?(a=a.replace("+","."),s&&s.startsWith(a)||!t.knownClasses.has(a)||t.markClassAsUsed(a,r),r):r},set:(t,s,n)=>("$$target"===s&&(e=n),e[s]=n,!0)})}function d(e){return!(!e.$$name&&!e.$$fullname)}function l(e){return!d(e)&&!!e.get}function h(e,s,i){const o=l(i)?i.get():i,r=o.$$fullname||o.$$name;t.registerUnusedClass(r,o),Object.defineProperty(e,s,{get(){const e=l(i)?i.get():i,s=e.$$fullname||e.$$name;return e.$$isProxy?(t.markClassAsUsed(s,e),e):(e.$$proxy&&e.$$proxy.$$target===e||(delete e.$$proxy,e.$$proxy=c(e,s)),n!==s&&t.markClassAsUsed(s,e),e.$$proxy)},set(t){var n;!d(n=i)&&n.set?i.set(t):e[s]!==t&&(e[s]=t)},enumerable:!0,configurable:!0}),o.prototype._constructors=o.prototype._constructors||new Map,o.prototype._constructors.set(o.$$fullname||o.$$name,o.prototype.constructor),Object.defineProperty(o.prototype,"$$constructor",{get(){const e=o.prototype._constructors.get(this.$$fullname||this.$$name);return e||this.__proto__.ctor},configurable:!0}),Object.defineProperty(o.prototype,"constructor",{get(){const e=o.prototype._constructors.get(this.$$fullname||this.$$name);return e?e.$$isProxy?e:(e.$$proxy&&e.$$proxy.$$target===e||(e.$$proxy=c(e,this.$$fullname||this.$$name)),e.$$proxy):this.__proto__.ctor},set(e){o.prototype._constructors.set(e.$$name,e)},configurable:!0,enumerable:!1})}function f(e){return e.$$isProxy?e:new Proxy(e,{get:(e,t)=>"$$isProxy"===t||e[t],set(e,t,n){if(null===s){const s="object"==typeof n&&0===Object.keys(n).length&&!n.$$isProxy;return e[t]=s?f(n):n,!0}return"function"==typeof n?h(e,t,n):e[t]=f(n),!0},defineProperty(e,t,n){if(n.value&&(n.get=()=>n.value,n.set=e=>{n.value=e}),null===s){const s=n.get();if(s&&s.$$fullname)return h(e,t,n),!0}const i=()=>{const s=typeof n.get();if("function"===s)h(e,t,n);else if("undefined"!==s){let s=f(n.get());Object.defineProperty(e,t,{get:()=>s,set(e){s=f(e),n.set(s)},enumerable:!0,configurable:!0})}else Object.defineProperty(e,t,n)};return Object.defineProperty(e,t,{get:()=>(i(),e[t]),set(s){n={value:s,get:()=>s,set:s=>{e[t]!==s&&(e[t]=s)}},i()},configurable:!0,enumerable:!0}),!0}})}Object.defineProperty(window,"Bridge",{get:()=>i,set(e){i!==e&&(!function(e){let t=null;const n=function(...n){s=n[0];const i=s.replace("+","."),o=t.call(e,...n);return u(o,i),s=null,o};Object.defineProperty(e,"define",{get:()=>n,set(e){t=e}})}(e),function(e){let t=null;const s=function(...s){n=s[0];const i=t.call(e,...s);return n=null,i};Object.defineProperty(e,"setMetadata",{get:()=>s,set(e){t=e}})}(e),function(e){const t=e.getTypeAlias;e.getTypeAlias=e=>t(e.$$target||e)}(e),e.global=f(window),["System","LunaUnity","Luna","UnityEditor","UnityEngine","UnityTest"].forEach((e=>{const t=f({});Object.defineProperty(window,e,{get:()=>t,set(e){}})})),i=e)}})}(),function(){if(!DEVELOP)return;function e(e,t,s){fetch(window.location.origin+"/tracing/disable",{method:"POST",body:JSON.stringify({className:e,methodName:t,isStatic:s})})}let t=null;function s(t,n,i,o,r){let a=!1;const u=()=>{a||(a=!0,console.warn(`%c[Runtime Analysis]%c You have excluded method or property "${n}" of the class "${i}" from the build via the Runtime Analysis tab but your project still uses it. It will be automatically included back next time you perform a build. However, we recommend to re-run Runtime Analysis completely if you feel like you made significant changes to your project.`,"color: white; background: black;",""),e(i,n,o))};if(!t[n])return;const c="function"==typeof t[n],d="object"==typeof t[n],l=d&&!(!t[n].get&&!t[n].set);if(c&&r(n,o)){const e=t[n];t[n]=function(...t){return u(),e.apply(this,t)}}else{if(l&&r(n,o)){const e=t[n];t[n]={get(){return u(),e.get.call(this)},set(t){u(),e.set.call(this,t)}}}d&&Object.keys(t[n]).forEach((e=>s(t[n],e,i,o,r)))}}Object.defineProperty(window,"Bridge",{get:()=>t,set(n){t!==n&&(t=n,function(t){let n=null;function i(t,i,o,r){if(!0===o||!i||"function"==typeof i||window.$environment.forceIncludedClasses.includes(t))return n(t,i,o,r);if(!!window.$environment.unusedClasses.find((({name:e,excluded:s})=>e===t&&s)))return n(t,function(t,s){let n=s.statics||s.$statics;n||(n={},s.statics=n);["fields","events","props","ctors","methods"].some((e=>e in n))&&(n.ctors=n.ctors||{},n=n.ctors);let i=n.ctor;i||(i=()=>{},n.ctor=i);return n.ctor=function(...s){console.warn(`%c[Runtime Analysis]%c You have excluded class ${t} from the build via the Runtime Analysis tab but your project still uses it. It will be automatically included back next time you perform a build. However, we recommend to re-run Runtime Analysis completely if you feel like you made significant changes to your project.`,"color: white; background: black;",""),e(t,null,!1),i.apply(this,s)},s}(t,i),o,r);const a=window.$environment.unusedMethods.find((e=>e.className===t));if(!a)return n(t,i,o,r);return n(t,function(e,t,n){for(const i of Object.keys(e))s(e,i,t,"statics"===i||"$statics"===i||"ctors"===i,n);return e}(i,t,((e,t)=>!!(t?a.staticMethods:a.instanceMethods).find((({name:t,excluded:s})=>t===e&&s)))),o,r)}Object.defineProperty(t,"define",{get:()=>i,set(e){n=e.bind(t)}})}(n))}})}();